From janarcs at umich.edu  Tue Apr  5 17:34:47 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Tue, 5 Apr 2011 12:34:47 -0400
Subject: [Smeagol-discuss] error compiling siesta+smeagol
Message-ID: <BANLkTiksNGir5_r4CsVFztgAOL2bc=56GA@mail.gmail.com>

Dear All

I recently downloaded smeagol and siesta 1.3p. I'm  trying to compile the
code and when i do that i'm getting an error as follows
*
siesta.F:736.28:

           write(6,'(a47)') 'smeagol: The size of the cell is being expa
                            1
Error: Unterminated character constant beginning at (1)
siesta.F:737.28:

           write(6,'(a46)') 'smeagol:  along the perpendicular direction
                            1
Error: Unterminated character constant beginning at (1)
make: *** [siesta.o] Error 1*

I'm not sure what causes this. I checked the code and i dont see any issues
with braces. I have also attached a copy of my arch.make along with the
email.
Also the README file told me to change alloc_c to alloc in siesta.F. I could
not find alloc_c anywhere in siesta.F. I hope this did not create the
compiler problem

It will be of great help if someone could help me resolve this issue.



Regards

Janakiraman Balachandran

Research Assistant

Computational Material Physics Group

Dept of Mechanical Engineering

2350 Hayward St, #2250 G.G Brown Building

Ann Arbor, MI 48109
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110405/40b26b25/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arch.make
Type: application/octet-stream
Size: 1972 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110405/40b26b25/attachment.obj 

From janarcs at umich.edu  Tue Apr  5 19:03:23 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Tue, 5 Apr 2011 14:03:23 -0400
Subject: [Smeagol-discuss] Fwd: error compiling siesta+smeagol
In-Reply-To: <BANLkTiksNGir5_r4CsVFztgAOL2bc=56GA@mail.gmail.com>
References: <BANLkTiksNGir5_r4CsVFztgAOL2bc=56GA@mail.gmail.com>
Message-ID: <BANLkTi=Seszid7YtDqhw+7TJ6P42ohhZ8Q@mail.gmail.com>

I cleared that error. The program was going beyong the 72 characters in the
line and i think that is what was causing the problem. However i have errors
in negf.f. The compilation errors are attached below

*../NETransport/negf.F:779.23:

         ALLOCATE(rho0L(N1,N1,NSPIN),rho0R(N1,N1,NSPIN))
                       1
Error: Syntax error in ALLOCATE statement at (1)
../NETransport/negf.F:844.12:

            rho0L(II,JJ,ISPIN)=rho0L(II,JJ,ISPIN)+
            1
Error: Unclassifiable statement at (1)
../NETransport/negf.F:867.30:

         CALL MPI_REDUCE(rho0L(1,1,1),rho0L_par(1,1,1),N1*N1*NSPIN,
                              1
Error: Syntax error in argument list at (1)
../NETransport/negf.F:876.50:

         ALLOCATE(DeltarhoL(N1,N1,NSPIN),DeltarhoR(N1,N1,NSPIN))
                                                  1
Error: Syntax error in ALLOCATE statement at (1)
../NETransport/negf.F:974.15:

               DeltarhoR(II,JJ,ISPIN)=DeltarhoR(II,JJ,ISPIN) +
               1
Error: Unclassifiable statement at (1)
../NETransport/negf.F:1059.34:

         CALL MPI_REDUCE(DeltarhoR(1,1,1),DrhoR_par(1,1,1),
                                  1
Error: Syntax error in argument list at (1)
../NETransport/negf.F:878.16:

       DeltarhoR=0.D0
                1
Error: Symbol 'deltarhor' at (1) has no IMPLICIT type
../NETransport/negf.F:780.12:

       rho0L=0.D0
            1
Error: Symbol 'rho0l' at (1) has no IMPLICIT type*


Regards

Janakiraman Balachandran

Research Assistant

Computational Material Physics Group

Dept of Mechanical Engineering

2350 Hayward St, #2250 G.G Brown Building

Ann Arbor, MI 48109


---------- Forwarded message ----------
From: janakiraman balachandran <janarcs at umich.edu>
Date: Tue, Apr 5, 2011 at 12:34 PM
Subject: error compiling siesta+smeagol
To: smeagol-discuss at lists.tchpc.tcd.ie


Dear All

I recently downloaded smeagol and siesta 1.3p. I'm  trying to compile the
code and when i do that i'm getting an error as follows
*
siesta.F:736.28:

           write(6,'(a47)') 'smeagol: The size of the cell is being expa
                            1
Error: Unterminated character constant beginning at (1)
siesta.F:737.28:

           write(6,'(a46)') 'smeagol:  along the perpendicular direction
                            1
Error: Unterminated character constant beginning at (1)
make: *** [siesta.o] Error 1*

I'm not sure what causes this. I checked the code and i dont see any issues
with braces. I have also attached a copy of my arch.make along with the
email.
Also the README file told me to change alloc_c to alloc in siesta.F. I could
not find alloc_c anywhere in siesta.F. I hope this did not create the
compiler problem

It will be of great help if someone could help me resolve this issue.



Regards

Janakiraman Balachandran

Research Assistant

Computational Material Physics Group

Dept of Mechanical Engineering

2350 Hayward St, #2250 G.G Brown Building

Ann Arbor, MI 48109
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110405/dc631bc0/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arch.make
Type: application/octet-stream
Size: 1972 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110405/dc631bc0/attachment.obj 

From janarcs at umich.edu  Thu Apr 14 22:27:45 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Thu, 14 Apr 2011 17:27:45 -0400
Subject: [Smeagol-discuss] Au unit cell not converging
In-Reply-To: <BANLkTimSYtKgew4fYnvKSwDi48h1B=ksLw@mail.gmail.com>
References: <BANLkTim1YvWURV2mRvbNpZMWDyXDiphBkA@mail.gmail.com>
	<BANLkTimSYtKgew4fYnvKSwDi48h1B=ksLw@mail.gmail.com>
Message-ID: <BANLkTimHPqu8P7Pwur1PmLsNGfnUYfC++w@mail.gmail.com>

>
> Hi
>


> I'm trying to run a Au unit cell in siesta. However i'm getting a warning
> stating the atoms  on opposite surfaces are too close (distance 0).
> Subsequently i get an error that says the leading minor is not positive
> definite and hence diagonalization cannot be performed. I'm very sure that i
> have used the correct Lattice distance and correct no of atoms for a FCC
> unit cell. I'm not sure what causes the problem. I have attached the fdf
> file. I have commented the *kgrid_Monkhorst_Pack* and* BandLines*. But
> even with them uncommented, i get the same error. i have also attached the
> out file for reference.
>
> I'm using siesta 1.3p. The program issues a warning at MD Step. Can someone
tell me how to turn off MD step

 I need to make it work as soon as possible. Hence any help to sort this
problem would be greatly appreciated

Thank you

Regards
Ram
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110414/f0cb1d83/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Au.fdf
Type: application/octet-stream
Size: 2607 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110414/f0cb1d83/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Au.out
Type: application/octet-stream
Size: 11807 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110414/f0cb1d83/attachment-0001.obj 

From janarcs at umich.edu  Fri Apr 15 23:59:26 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Fri, 15 Apr 2011 18:59:26 -0400
Subject: [Smeagol-discuss] Segmentation fault error
Message-ID: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>

Dear All

Please discard all the questions that i had asked before. I found answers to
them. Currently i'm getting a segmentation fault which i dont understand
why? I'm trying to run a Benzene Dithiol in smeagol with Au electrodes. I
used 20 processors to run the job but it stillf ailed. I have attached the
fdf of the lead and the scattering region and the error and out file of the
scattering region

It would be of great help if someone can run this to find out what is the
problem. I'm not sure if its the problem of my MPI. If so i will try to
resolve it.

Thank you

Regards
Ram
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110415/f2008a4c/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Au-BDT_lead.fdf
Type: application/octet-stream
Size: 3273 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110415/f2008a4c/attachment-0004.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: BDT-Au_scat.fdf
Type: application/octet-stream
Size: 7000 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110415/f2008a4c/attachment-0005.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: BDT-Au_scat.out
Type: application/octet-stream
Size: 32662 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110415/f2008a4c/attachment-0006.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Elec.e5138446
Type: application/octet-stream
Size: 620 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110415/f2008a4c/attachment-0007.obj 

From runggeri at tcd.ie  Sat Apr 16 09:21:35 2011
From: runggeri at tcd.ie (Ivan Rungger)
Date: Sat, 16 Apr 2011 09:21:35 +0100
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
Message-ID: <4DA9518F.4060505@tcd.ie>

Hello Janikiraman,

  sometimes such a segmentation fault is caused by a low setting for the 
stack size limit in your shell. If you use bash, you should set "ulimit 
-s unlimited" before running smeagol. I also had a look at your input 
file, and in general it is OK, just you have to change the number of 
imaginary energy points. In your file you use 0 for the number of poles, 
which will not work, since you need at least a few poles. For a room 
temperature calculation I suggest to use:
EnergImCircle           16
NEnergImLine           16
NPoles                       16

Cheers,

 Ivan

janakiraman balachandran wrote:
> Dear All
>
> Please discard all the questions that i had asked before. I found 
> answers to them. Currently i'm getting a segmentation fault which i 
> dont understand why? I'm trying to run a Benzene Dithiol in smeagol 
> with Au electrodes. I used 20 processors to run the job but it stillf 
> ailed. I have attached the fdf of the lead and the scattering region 
> and the error and out file of the scattering region
>
> It would be of great help if someone can run this to find out what is 
> the problem. I'm not sure if its the problem of my MPI. If so i will 
> try to resolve it.
>
> Thank you
>
> Regards
> Ram
> ------------------------------------------------------------------------
>
> _______________________________________________
> Smeagol-discuss mailing list
> Smeagol-discuss at lists.tchpc.tcd.ie
> http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss


From janarcs at umich.edu  Sat Apr 16 16:59:27 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Sat, 16 Apr 2011 11:59:27 -0400
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <4DA9518F.4060505@tcd.ie>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
Message-ID: <BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>

Thank you very much ivan
I did a 'ulimit -s unlimited and then  'ulimit -a' on my server and these
are the values i found these values

core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 65536
max locked memory       (kbytes, -l) 131072
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) unlimited
cpu time               (seconds, -t) unlimited
max user processes              (-u) 65536
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited

I believe the max memory memory is unlimited. However still the program
fails  with a segmentation fault and i have attached the error file along
with the email. I also get an MPI message. Does that mean my code was not
parallelized properly?  But the gamma_p example runs very nicely even when i
have 8 processors. I dont know why this example fails.

I'm really confused. I'm sorry for the trouble caused

Regardsq
Ram





7 more processes have sent help message help-mpi-btl-base.txt / btl:no-nics

On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger <runggeri at tcd.ie> wrote:

> Hello Janikiraman,
>
>  sometimes such a segmentation fault is caused by a low setting for the
> stack size limit in your shell. If you use bash, you should set "ulimit -s
> unlimited" before running smeagol. I also had a look at your input file, and
> in general it is OK, just you have to change the number of imaginary energy
> points. In your file you use 0 for the number of poles, which will not work,
> since you need at least a few poles. For a room temperature calculation I
> suggest to use:
> EnergImCircle           16
> NEnergImLine           16
> NPoles                       16
>
> Cheers,
>
> Ivan
>
> janakiraman balachandran wrote:
>
>> Dear All
>>
>> Please discard all the questions that i had asked before. I found answers
>> to them. Currently i'm getting a segmentation fault which i dont understand
>> why? I'm trying to run a Benzene Dithiol in smeagol with Au electrodes. I
>> used 20 processors to run the job but it stillf ailed. I have attached the
>> fdf of the lead and the scattering region and the error and out file of the
>> scattering region
>>
>> It would be of great help if someone can run this to find out what is the
>> problem. I'm not sure if its the problem of my MPI. If so i will try to
>> resolve it.
>>
>> Thank you
>>
>> Regards
>> Ram
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> Smeagol-discuss mailing list
>> Smeagol-discuss at lists.tchpc.tcd.ie
>> http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110416/3155db63/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Elec.e5139908
Type: application/octet-stream
Size: 907 bytes
Desc: not available
Url : http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110416/3155db63/attachment.obj 

From janarcs at umich.edu  Sat Apr 16 18:17:19 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Sat, 16 Apr 2011 13:17:19 -0400
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
	<BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
Message-ID: <BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>

I actually checked in the server. We have atleast 2GB of memory per node (4
procs per node, so atleast 512MB per processor). I have used 2 - 4 nodes in
my calculation all of which fails. The output says that the dynamic memory
allocated is only of order of MB (sometimes 32, sometimes 64).

I checked the successful gamma_p run. I saw 19 MB per processor. So i
believe 32/64 MB as well was per processor. Why SMEAGOL allocates so less
memory when I have higher memory available? Was that cos of the options
during compilation? If so what options must i change to ensure that smeagol
uses the complete memory available

Regards
Ram

On Sat, Apr 16, 2011 at 11:59 AM, janakiraman balachandran <
janarcs at umich.edu> wrote:

> Thank you very much ivan
> I did a 'ulimit -s unlimited and then  'ulimit -a' on my server and these
> are the values i found these values
>
> core file size          (blocks, -c) 0
> data seg size           (kbytes, -d) unlimited
> scheduling priority             (-e) 0
> file size               (blocks, -f) unlimited
> pending signals                 (-i) 65536
> max locked memory       (kbytes, -l) 131072
> max memory size         (kbytes, -m) unlimited
> open files                      (-n) 1024
> pipe size            (512 bytes, -p) 8
> POSIX message queues     (bytes, -q) 819200
> real-time priority              (-r) 0
> stack size              (kbytes, -s) unlimited
> cpu time               (seconds, -t) unlimited
> max user processes              (-u) 65536
> virtual memory          (kbytes, -v) unlimited
> file locks                      (-x) unlimited
>
> I believe the max memory memory is unlimited. However still the program
> fails  with a segmentation fault and i have attached the error file along
> with the email. I also get an MPI message. Does that mean my code was not
> parallelized properly?  But the gamma_p example runs very nicely even when i
> have 8 processors. I dont know why this example fails.
>
> I'm really confused. I'm sorry for the trouble caused
>
> Regardsq
> Ram
>
>
>
>
>
> 7 more processes have sent help message help-mpi-btl-base.txt / btl:no-nics
>
>
> On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger <runggeri at tcd.ie> wrote:
>
>> Hello Janikiraman,
>>
>>  sometimes such a segmentation fault is caused by a low setting for the
>> stack size limit in your shell. If you use bash, you should set "ulimit -s
>> unlimited" before running smeagol. I also had a look at your input file, and
>> in general it is OK, just you have to change the number of imaginary energy
>> points. In your file you use 0 for the number of poles, which will not work,
>> since you need at least a few poles. For a room temperature calculation I
>> suggest to use:
>> EnergImCircle           16
>> NEnergImLine           16
>> NPoles                       16
>>
>> Cheers,
>>
>> Ivan
>>
>> janakiraman balachandran wrote:
>>
>>> Dear All
>>>
>>> Please discard all the questions that i had asked before. I found answers
>>> to them. Currently i'm getting a segmentation fault which i dont understand
>>> why? I'm trying to run a Benzene Dithiol in smeagol with Au electrodes. I
>>> used 20 processors to run the job but it stillf ailed. I have attached the
>>> fdf of the lead and the scattering region and the error and out file of the
>>> scattering region
>>>
>>> It would be of great help if someone can run this to find out what is the
>>> problem. I'm not sure if its the problem of my MPI. If so i will try to
>>> resolve it.
>>>
>>> Thank you
>>>
>>> Regards
>>> Ram
>>> ------------------------------------------------------------------------
>>>
>>> _______________________________________________
>>> Smeagol-discuss mailing list
>>> Smeagol-discuss at lists.tchpc.tcd.ie
>>> http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>>>
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110416/57cf1329/attachment.html 

From janarcs at umich.edu  Sat Apr 16 19:06:29 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Sat, 16 Apr 2011 14:06:29 -0400
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
	<BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
	<BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>
Message-ID: <BANLkTim-tqC1iwFwoH4XtVTzdB9_a+gsxw@mail.gmail.com>

Ivan

If i comment out the smeagol input options, the program runs fine without
any issues. So does this mean that i'm goofing up something with SMEAGOL
options?

Ram

On Sat, Apr 16, 2011 at 1:17 PM, janakiraman balachandran <janarcs at umich.edu
> wrote:

> I actually checked in the server. We have atleast 2GB of memory per node (4
> procs per node, so atleast 512MB per processor). I have used 2 - 4 nodes in
> my calculation all of which fails. The output says that the dynamic memory
> allocated is only of order of MB (sometimes 32, sometimes 64).
>
> I checked the successful gamma_p run. I saw 19 MB per processor. So i
> believe 32/64 MB as well was per processor. Why SMEAGOL allocates so less
> memory when I have higher memory available? Was that cos of the options
> during compilation? If so what options must i change to ensure that smeagol
> uses the complete memory available
>
> Regards
> Ram
>
>
> On Sat, Apr 16, 2011 at 11:59 AM, janakiraman balachandran <
> janarcs at umich.edu> wrote:
>
>> Thank you very much ivan
>> I did a 'ulimit -s unlimited and then  'ulimit -a' on my server and these
>> are the values i found these values
>>
>> core file size          (blocks, -c) 0
>> data seg size           (kbytes, -d) unlimited
>> scheduling priority             (-e) 0
>> file size               (blocks, -f) unlimited
>> pending signals                 (-i) 65536
>> max locked memory       (kbytes, -l) 131072
>> max memory size         (kbytes, -m) unlimited
>> open files                      (-n) 1024
>> pipe size            (512 bytes, -p) 8
>> POSIX message queues     (bytes, -q) 819200
>> real-time priority              (-r) 0
>> stack size              (kbytes, -s) unlimited
>> cpu time               (seconds, -t) unlimited
>> max user processes              (-u) 65536
>> virtual memory          (kbytes, -v) unlimited
>> file locks                      (-x) unlimited
>>
>> I believe the max memory memory is unlimited. However still the program
>> fails  with a segmentation fault and i have attached the error file along
>> with the email. I also get an MPI message. Does that mean my code was not
>> parallelized properly?  But the gamma_p example runs very nicely even when i
>> have 8 processors. I dont know why this example fails.
>>
>> I'm really confused. I'm sorry for the trouble caused
>>
>> Regardsq
>> Ram
>>
>>
>>
>>
>>
>> 7 more processes have sent help message help-mpi-btl-base.txt /
>> btl:no-nics
>>
>>
>> On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger <runggeri at tcd.ie> wrote:
>>
>>> Hello Janikiraman,
>>>
>>>  sometimes such a segmentation fault is caused by a low setting for the
>>> stack size limit in your shell. If you use bash, you should set "ulimit -s
>>> unlimited" before running smeagol. I also had a look at your input file, and
>>> in general it is OK, just you have to change the number of imaginary energy
>>> points. In your file you use 0 for the number of poles, which will not work,
>>> since you need at least a few poles. For a room temperature calculation I
>>> suggest to use:
>>> EnergImCircle           16
>>> NEnergImLine           16
>>> NPoles                       16
>>>
>>> Cheers,
>>>
>>> Ivan
>>>
>>> janakiraman balachandran wrote:
>>>
>>>> Dear All
>>>>
>>>> Please discard all the questions that i had asked before. I found
>>>> answers to them. Currently i'm getting a segmentation fault which i dont
>>>> understand why? I'm trying to run a Benzene Dithiol in smeagol with Au
>>>> electrodes. I used 20 processors to run the job but it stillf ailed. I have
>>>> attached the fdf of the lead and the scattering region and the error and out
>>>> file of the scattering region
>>>>
>>>> It would be of great help if someone can run this to find out what is
>>>> the problem. I'm not sure if its the problem of my MPI. If so i will try to
>>>> resolve it.
>>>>
>>>> Thank you
>>>>
>>>> Regards
>>>> Ram
>>>> ------------------------------------------------------------------------
>>>>
>>>> _______________________________________________
>>>> Smeagol-discuss mailing list
>>>> Smeagol-discuss at lists.tchpc.tcd.ie
>>>> http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>>>>
>>>
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110416/5405080f/attachment-0001.html 

From runggeri at tcd.ie  Sun Apr 17 07:53:54 2011
From: runggeri at tcd.ie (Ivan Rungger)
Date: Sun, 17 Apr 2011 07:53:54 +0100
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <BANLkTim-tqC1iwFwoH4XtVTzdB9_a+gsxw@mail.gmail.com>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
	<BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
	<BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>
	<BANLkTim-tqC1iwFwoH4XtVTzdB9_a+gsxw@mail.gmail.com>
Message-ID: <4DAA8E82.40601@tcd.ie>

Hi Janakiraman,

 did you also change the number of imaginary energy points?

Cheers,

  Ivan

janakiraman balachandran wrote:
> Ivan
>
> If i comment out the smeagol input options, the program runs fine 
> without any issues. So does this mean that i'm goofing up something 
> with SMEAGOL options?
>
> Ram
>
> On Sat, Apr 16, 2011 at 1:17 PM, janakiraman balachandran 
> <janarcs at umich.edu <mailto:janarcs at umich.edu>> wrote:
>
>     I actually checked in the server. We have atleast 2GB of memory
>     per node (4 procs per node, so atleast 512MB per processor). I
>     have used 2 - 4 nodes in my calculation all of which fails. The
>     output says that the dynamic memory allocated is only of order of
>     MB (sometimes 32, sometimes 64).
>
>     I checked the successful gamma_p run. I saw 19 MB per processor.
>     So i believe 32/64 MB as well was per processor. Why SMEAGOL
>     allocates so less memory when I have higher memory available? Was
>     that cos of the options during compilation? If so what options
>     must i change to ensure that smeagol uses the complete memory
>     available
>
>     Regards
>     Ram
>
>
>     On Sat, Apr 16, 2011 at 11:59 AM, janakiraman balachandran
>     <janarcs at umich.edu <mailto:janarcs at umich.edu>> wrote:
>
>         Thank you very much ivan
>         I did a 'ulimit -s unlimited and then  'ulimit -a' on my
>         server and these are the values i found these values
>
>         core file size          (blocks, -c) 0
>         data seg size           (kbytes, -d) unlimited
>         scheduling priority             (-e) 0
>         file size               (blocks, -f) unlimited
>         pending signals                 (-i) 65536
>         max locked memory       (kbytes, -l) 131072
>         max memory size         (kbytes, -m) unlimited
>         open files                      (-n) 1024
>         pipe size            (512 bytes, -p) 8
>         POSIX message queues     (bytes, -q) 819200
>         real-time priority              (-r) 0
>         stack size              (kbytes, -s) unlimited
>         cpu time               (seconds, -t) unlimited
>         max user processes              (-u) 65536
>         virtual memory          (kbytes, -v) unlimited
>         file locks                      (-x) unlimited
>
>         I believe the max memory memory is unlimited. However still
>         the program fails  with a segmentation fault and i have
>         attached the error file along with the email. I also get an
>         MPI message. Does that mean my code was not parallelized
>         properly?  But the gamma_p example runs very nicely even when
>         i have 8 processors. I dont know why this example fails.
>
>         I'm really confused. I'm sorry for the trouble caused
>
>         Regardsq
>         Ram
>
>
>
>
>
>         7 more processes have sent help message help-mpi-btl-base.txt
>         / btl:no-nics
>
>
>         On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger <runggeri at tcd.ie
>         <mailto:runggeri at tcd.ie>> wrote:
>
>             Hello Janikiraman,
>
>              sometimes such a segmentation fault is caused by a low
>             setting for the stack size limit in your shell. If you use
>             bash, you should set "ulimit -s unlimited" before running
>             smeagol. I also had a look at your input file, and in
>             general it is OK, just you have to change the number of
>             imaginary energy points. In your file you use 0 for the
>             number of poles, which will not work, since you need at
>             least a few poles. For a room temperature calculation I
>             suggest to use:
>             EnergImCircle           16
>             NEnergImLine           16
>             NPoles                       16
>
>             Cheers,
>
>             Ivan
>
>             janakiraman balachandran wrote:
>
>                 Dear All
>
>                 Please discard all the questions that i had asked
>                 before. I found answers to them. Currently i'm getting
>                 a segmentation fault which i dont understand why? I'm
>                 trying to run a Benzene Dithiol in smeagol with Au
>                 electrodes. I used 20 processors to run the job but it
>                 stillf ailed. I have attached the fdf of the lead and
>                 the scattering region and the error and out file of
>                 the scattering region
>
>                 It would be of great help if someone can run this to
>                 find out what is the problem. I'm not sure if its the
>                 problem of my MPI. If so i will try to resolve it.
>
>                 Thank you
>
>                 Regards
>                 Ram
>                 ------------------------------------------------------------------------
>
>                 _______________________________________________
>                 Smeagol-discuss mailing list
>                 Smeagol-discuss at lists.tchpc.tcd.ie
>                 <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>
>                 http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>
>
>
>
>
>


From runggeri at tcd.ie  Sun Apr 17 21:00:31 2011
From: runggeri at tcd.ie (Ivan Rungger)
Date: Sun, 17 Apr 2011 21:00:31 +0100
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <BANLkTimxYD5HfHn7OhhDWkvff-DoGD=51Q@mail.gmail.com>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
	<BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
	<BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>
	<BANLkTim-tqC1iwFwoH4XtVTzdB9_a+gsxw@mail.gmail.com>
	<4DAA8E82.40601@tcd.ie>
	<BANLkTimxYD5HfHn7OhhDWkvff-DoGD=51Q@mail.gmail.com>
Message-ID: <4DAB46DF.8010602@tcd.ie>

Hello Janakiraman,

 I checked your input file: maybe the reason for the crashing is that 
you use NeglNonOverlapInt True in the leads, but it is set to False in 
the file for the scattering region. You have to use the same value for 
both (I suggest to use NeglNonOverlapInt False in both).

Cheers,

 Ivan

janakiraman balachandran wrote:
> Hi Ivan
>
> Yes i did. Infact i went as low as
> NEnergImCircle           5
> NEnergImLine             5
> NPoles                   10
>
>
>
>
> Thank you
>
> Ram
>
> On Sun, Apr 17, 2011 at 2:53 AM, Ivan Rungger <runggeri at tcd.ie 
> <mailto:runggeri at tcd.ie>> wrote:
>
>     Hi Janakiraman,
>
>     did you also change the number of imaginary energy points?
>
>
>     Cheers,
>
>      Ivan
>
>     janakiraman balachandran wrote:
>
>         Ivan
>
>         If i comment out the smeagol input options, the program runs
>         fine without any issues. So does this mean that i'm goofing up
>         something with SMEAGOL options?
>
>         Ram
>
>         On Sat, Apr 16, 2011 at 1:17 PM, janakiraman balachandran
>         <janarcs at umich.edu <mailto:janarcs at umich.edu>
>         <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>> wrote:
>
>            I actually checked in the server. We have atleast 2GB of memory
>            per node (4 procs per node, so atleast 512MB per processor). I
>            have used 2 - 4 nodes in my calculation all of which fails. The
>            output says that the dynamic memory allocated is only of
>         order of
>            MB (sometimes 32, sometimes 64).
>
>            I checked the successful gamma_p run. I saw 19 MB per
>         processor.
>            So i believe 32/64 MB as well was per processor. Why SMEAGOL
>            allocates so less memory when I have higher memory
>         available? Was
>            that cos of the options during compilation? If so what options
>            must i change to ensure that smeagol uses the complete memory
>            available
>
>            Regards
>            Ram
>
>
>            On Sat, Apr 16, 2011 at 11:59 AM, janakiraman balachandran
>            <janarcs at umich.edu <mailto:janarcs at umich.edu>
>         <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>> wrote:
>
>                Thank you very much ivan
>                I did a 'ulimit -s unlimited and then  'ulimit -a' on my
>                server and these are the values i found these values
>
>                core file size          (blocks, -c) 0
>                data seg size           (kbytes, -d) unlimited
>                scheduling priority             (-e) 0
>                file size               (blocks, -f) unlimited
>                pending signals                 (-i) 65536
>                max locked memory       (kbytes, -l) 131072
>                max memory size         (kbytes, -m) unlimited
>                open files                      (-n) 1024
>                pipe size            (512 bytes, -p) 8
>                POSIX message queues     (bytes, -q) 819200
>                real-time priority              (-r) 0
>                stack size              (kbytes, -s) unlimited
>                cpu time               (seconds, -t) unlimited
>                max user processes              (-u) 65536
>                virtual memory          (kbytes, -v) unlimited
>                file locks                      (-x) unlimited
>
>                I believe the max memory memory is unlimited. However still
>                the program fails  with a segmentation fault and i have
>                attached the error file along with the email. I also get an
>                MPI message. Does that mean my code was not parallelized
>                properly?  But the gamma_p example runs very nicely
>         even when
>                i have 8 processors. I dont know why this example fails.
>
>                I'm really confused. I'm sorry for the trouble caused
>
>                Regardsq
>                Ram
>
>
>
>
>
>                7 more processes have sent help message
>         help-mpi-btl-base.txt
>                / btl:no-nics
>
>
>                On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger
>         <runggeri at tcd.ie <mailto:runggeri at tcd.ie>
>                <mailto:runggeri at tcd.ie <mailto:runggeri at tcd.ie>>> wrote:
>
>                    Hello Janikiraman,
>
>                     sometimes such a segmentation fault is caused by a low
>                    setting for the stack size limit in your shell. If
>         you use
>                    bash, you should set "ulimit -s unlimited" before
>         running
>                    smeagol. I also had a look at your input file, and in
>                    general it is OK, just you have to change the number of
>                    imaginary energy points. In your file you use 0 for the
>                    number of poles, which will not work, since you need at
>                    least a few poles. For a room temperature calculation I
>                    suggest to use:
>                    EnergImCircle           16
>                    NEnergImLine           16
>                    NPoles                       16
>
>                    Cheers,
>
>                    Ivan
>
>                    janakiraman balachandran wrote:
>
>                        Dear All
>
>                        Please discard all the questions that i had asked
>                        before. I found answers to them. Currently i'm
>         getting
>                        a segmentation fault which i dont understand
>         why? I'm
>                        trying to run a Benzene Dithiol in smeagol with Au
>                        electrodes. I used 20 processors to run the job
>         but it
>                        stillf ailed. I have attached the fdf of the
>         lead and
>                        the scattering region and the error and out file of
>                        the scattering region
>
>                        It would be of great help if someone can run
>         this to
>                        find out what is the problem. I'm not sure if
>         its the
>                        problem of my MPI. If so i will try to resolve it.
>
>                        Thank you
>
>                        Regards
>                        Ram
>                      
>          ------------------------------------------------------------------------
>
>                        _______________________________________________
>                        Smeagol-discuss mailing list
>                        Smeagol-discuss at lists.tchpc.tcd.ie
>         <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>
>                        <mailto:Smeagol-discuss at lists.tchpc.tcd.ie
>         <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>>
>
>                        http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>
>
>
>
>
>
>
>
>


From janarcs at umich.edu  Mon Apr 18 12:20:04 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Mon, 18 Apr 2011 07:20:04 -0400
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <4DAB46DF.8010602@tcd.ie>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
	<BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
	<BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>
	<BANLkTim-tqC1iwFwoH4XtVTzdB9_a+gsxw@mail.gmail.com>
	<4DAA8E82.40601@tcd.ie>
	<BANLkTimxYD5HfHn7OhhDWkvff-DoGD=51Q@mail.gmail.com>
	<4DAB46DF.8010602@tcd.ie>
Message-ID: <BANLkTi=n7XeZ4mRJNNrVesced39DiDFegQ@mail.gmail.com>

Ivan

My apologies for not putting the question correctly in the previous email.
I was in the process of testing and i jumped the gun in advance. I'm really
sorry about that. The issue is with MPI.

a) I was seg faulting because i was trying to use the data from a non mpi
run of leads in a mpi run for scattering region. Is this something common
that has been observed?

b) If i run a lead(electrode) calculation in MPI, by commenting the smeagol
options (BulkTransport and BulkLeads), the job completes. However if i
include the smeagol options, the job goes through the SCF, prints them and
then it prints

*"Transport in z direction" *

and then it gets stuck. It never ends. To me the above problem indicates,
there is some issue with the parallelization of the smeagol code. Have you
encountered problems like this before? Do you have some suggestion. I guess
this would be the last hurdle, since i understand how to use the options and
how to match the potential well.

It will be of great help if you can help me fix this problem.

Thank you

Regards
Ram



On Sun, Apr 17, 2011 at 4:00 PM, Ivan Rungger <runggeri at tcd.ie> wrote:

> Hello Janakiraman,
>
> I checked your input file: maybe the reason for the crashing is that you
> use NeglNonOverlapInt True in the leads, but it is set to False in the file
> for the scattering region. You have to use the same value for both (I
> suggest to use NeglNonOverlapInt False in both).
>
>
> Cheers,
>
> Ivan
>
> janakiraman balachandran wrote:
>
>> Hi Ivan
>>
>> Yes i did. Infact i went as low as
>> NEnergImCircle           5
>> NEnergImLine             5
>> NPoles                   10
>>
>>
>>
>>
>> Thank you
>>
>> Ram
>>
>>
>> On Sun, Apr 17, 2011 at 2:53 AM, Ivan Rungger <runggeri at tcd.ie <mailto:
>> runggeri at tcd.ie>> wrote:
>>
>>    Hi Janakiraman,
>>
>>    did you also change the number of imaginary energy points?
>>
>>
>>    Cheers,
>>
>>     Ivan
>>
>>    janakiraman balachandran wrote:
>>
>>        Ivan
>>
>>        If i comment out the smeagol input options, the program runs
>>        fine without any issues. So does this mean that i'm goofing up
>>        something with SMEAGOL options?
>>
>>        Ram
>>
>>        On Sat, Apr 16, 2011 at 1:17 PM, janakiraman balachandran
>>        <janarcs at umich.edu <mailto:janarcs at umich.edu>
>>        <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>> wrote:
>>
>>           I actually checked in the server. We have atleast 2GB of memory
>>           per node (4 procs per node, so atleast 512MB per processor). I
>>           have used 2 - 4 nodes in my calculation all of which fails. The
>>           output says that the dynamic memory allocated is only of
>>        order of
>>           MB (sometimes 32, sometimes 64).
>>
>>           I checked the successful gamma_p run. I saw 19 MB per
>>        processor.
>>           So i believe 32/64 MB as well was per processor. Why SMEAGOL
>>           allocates so less memory when I have higher memory
>>        available? Was
>>           that cos of the options during compilation? If so what options
>>           must i change to ensure that smeagol uses the complete memory
>>           available
>>
>>           Regards
>>           Ram
>>
>>
>>           On Sat, Apr 16, 2011 at 11:59 AM, janakiraman balachandran
>>           <janarcs at umich.edu <mailto:janarcs at umich.edu>
>>        <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>> wrote:
>>
>>               Thank you very much ivan
>>               I did a 'ulimit -s unlimited and then  'ulimit -a' on my
>>               server and these are the values i found these values
>>
>>               core file size          (blocks, -c) 0
>>               data seg size           (kbytes, -d) unlimited
>>               scheduling priority             (-e) 0
>>               file size               (blocks, -f) unlimited
>>               pending signals                 (-i) 65536
>>               max locked memory       (kbytes, -l) 131072
>>               max memory size         (kbytes, -m) unlimited
>>               open files                      (-n) 1024
>>               pipe size            (512 bytes, -p) 8
>>               POSIX message queues     (bytes, -q) 819200
>>               real-time priority              (-r) 0
>>               stack size              (kbytes, -s) unlimited
>>               cpu time               (seconds, -t) unlimited
>>               max user processes              (-u) 65536
>>               virtual memory          (kbytes, -v) unlimited
>>               file locks                      (-x) unlimited
>>
>>               I believe the max memory memory is unlimited. However still
>>               the program fails  with a segmentation fault and i have
>>               attached the error file along with the email. I also get an
>>               MPI message. Does that mean my code was not parallelized
>>               properly?  But the gamma_p example runs very nicely
>>        even when
>>               i have 8 processors. I dont know why this example fails.
>>
>>               I'm really confused. I'm sorry for the trouble caused
>>
>>               Regardsq
>>               Ram
>>
>>
>>
>>
>>
>>               7 more processes have sent help message
>>        help-mpi-btl-base.txt
>>               / btl:no-nics
>>
>>
>>               On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger
>>        <runggeri at tcd.ie <mailto:runggeri at tcd.ie>
>>               <mailto:runggeri at tcd.ie <mailto:runggeri at tcd.ie>>> wrote:
>>
>>                   Hello Janikiraman,
>>
>>                    sometimes such a segmentation fault is caused by a low
>>                   setting for the stack size limit in your shell. If
>>        you use
>>                   bash, you should set "ulimit -s unlimited" before
>>        running
>>                   smeagol. I also had a look at your input file, and in
>>                   general it is OK, just you have to change the number of
>>                   imaginary energy points. In your file you use 0 for the
>>                   number of poles, which will not work, since you need at
>>                   least a few poles. For a room temperature calculation I
>>                   suggest to use:
>>                   EnergImCircle           16
>>                   NEnergImLine           16
>>                   NPoles                       16
>>
>>                   Cheers,
>>
>>                   Ivan
>>
>>                   janakiraman balachandran wrote:
>>
>>                       Dear All
>>
>>                       Please discard all the questions that i had asked
>>                       before. I found answers to them. Currently i'm
>>        getting
>>                       a segmentation fault which i dont understand
>>        why? I'm
>>                       trying to run a Benzene Dithiol in smeagol with Au
>>                       electrodes. I used 20 processors to run the job
>>        but it
>>                       stillf ailed. I have attached the fdf of the
>>        lead and
>>                       the scattering region and the error and out file of
>>                       the scattering region
>>
>>                       It would be of great help if someone can run
>>        this to
>>                       find out what is the problem. I'm not sure if
>>        its the
>>                       problem of my MPI. If so i will try to resolve it.
>>
>>                       Thank you
>>
>>                       Regards
>>                       Ram
>>
>>  ------------------------------------------------------------------------
>>
>>                       _______________________________________________
>>                       Smeagol-discuss mailing list
>>                       Smeagol-discuss at lists.tchpc.tcd.ie
>>        <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>
>>                       <mailto:Smeagol-discuss at lists.tchpc.tcd.ie
>>        <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>>
>>
>>                       http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110418/87880816/attachment.html 

From janarcs at umich.edu  Mon Apr 18 19:29:03 2011
From: janarcs at umich.edu (janakiraman balachandran)
Date: Mon, 18 Apr 2011 14:29:03 -0400
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <BANLkTi=n7XeZ4mRJNNrVesced39DiDFegQ@mail.gmail.com>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
	<BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
	<BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>
	<BANLkTim-tqC1iwFwoH4XtVTzdB9_a+gsxw@mail.gmail.com>
	<4DAA8E82.40601@tcd.ie>
	<BANLkTimxYD5HfHn7OhhDWkvff-DoGD=51Q@mail.gmail.com>
	<4DAB46DF.8010602@tcd.ie>
	<BANLkTi=n7XeZ4mRJNNrVesced39DiDFegQ@mail.gmail.com>
Message-ID: <BANLkTik+idZQrCkaL-9HrAPDOFpf-oZUFQ@mail.gmail.com>

Hi

My system administrator did some mpi debugging (using PADB tool) and this is
the reason that he says for the job to get stuck infinitely

Cpu Rank 0 is trying to call MPI_Bcast()  (an mpi 1.1 call) and the rest
(1-N) are calling MPI_Barrior()  (also an mpi 1.1 call) and they are hung
then because they are waiting for each other to complete.

Has this been observed in smeagol and has the patches been made for it?

Regards
Ram




On Mon, Apr 18, 2011 at 7:20 AM, janakiraman balachandran <janarcs at umich.edu
> wrote:

> Ivan
>
> My apologies for not putting the question correctly in the previous email.
> I was in the process of testing and i jumped the gun in advance. I'm really
> sorry about that. The issue is with MPI.
>
> a) I was seg faulting because i was trying to use the data from a non mpi
> run of leads in a mpi run for scattering region. Is this something common
> that has been observed?
>
> b) If i run a lead(electrode) calculation in MPI, by commenting the smeagol
> options (BulkTransport and BulkLeads), the job completes. However if i
> include the smeagol options, the job goes through the SCF, prints them and
> then it prints
>
> *"Transport in z direction" *
>
> and then it gets stuck. It never ends. To me the above problem indicates,
> there is some issue with the parallelization of the smeagol code. Have you
> encountered problems like this before? Do you have some suggestion. I guess
> this would be the last hurdle, since i understand how to use the options and
> how to match the potential well.
>
> It will be of great help if you can help me fix this problem.
>
> Thank you
>
> Regards
> Ram
>
>
>
>
> On Sun, Apr 17, 2011 at 4:00 PM, Ivan Rungger <runggeri at tcd.ie> wrote:
>
>> Hello Janakiraman,
>>
>> I checked your input file: maybe the reason for the crashing is that you
>> use NeglNonOverlapInt True in the leads, but it is set to False in the file
>> for the scattering region. You have to use the same value for both (I
>> suggest to use NeglNonOverlapInt False in both).
>>
>>
>> Cheers,
>>
>> Ivan
>>
>> janakiraman balachandran wrote:
>>
>>> Hi Ivan
>>>
>>> Yes i did. Infact i went as low as
>>> NEnergImCircle           5
>>> NEnergImLine             5
>>> NPoles                   10
>>>
>>>
>>>
>>>
>>> Thank you
>>>
>>> Ram
>>>
>>>
>>> On Sun, Apr 17, 2011 at 2:53 AM, Ivan Rungger <runggeri at tcd.ie <mailto:
>>> runggeri at tcd.ie>> wrote:
>>>
>>>    Hi Janakiraman,
>>>
>>>    did you also change the number of imaginary energy points?
>>>
>>>
>>>    Cheers,
>>>
>>>     Ivan
>>>
>>>    janakiraman balachandran wrote:
>>>
>>>        Ivan
>>>
>>>        If i comment out the smeagol input options, the program runs
>>>        fine without any issues. So does this mean that i'm goofing up
>>>        something with SMEAGOL options?
>>>
>>>        Ram
>>>
>>>        On Sat, Apr 16, 2011 at 1:17 PM, janakiraman balachandran
>>>        <janarcs at umich.edu <mailto:janarcs at umich.edu>
>>>        <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>> wrote:
>>>
>>>           I actually checked in the server. We have atleast 2GB of memory
>>>           per node (4 procs per node, so atleast 512MB per processor). I
>>>           have used 2 - 4 nodes in my calculation all of which fails. The
>>>           output says that the dynamic memory allocated is only of
>>>        order of
>>>           MB (sometimes 32, sometimes 64).
>>>
>>>           I checked the successful gamma_p run. I saw 19 MB per
>>>        processor.
>>>           So i believe 32/64 MB as well was per processor. Why SMEAGOL
>>>           allocates so less memory when I have higher memory
>>>        available? Was
>>>           that cos of the options during compilation? If so what options
>>>           must i change to ensure that smeagol uses the complete memory
>>>           available
>>>
>>>           Regards
>>>           Ram
>>>
>>>
>>>           On Sat, Apr 16, 2011 at 11:59 AM, janakiraman balachandran
>>>           <janarcs at umich.edu <mailto:janarcs at umich.edu>
>>>        <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>> wrote:
>>>
>>>               Thank you very much ivan
>>>               I did a 'ulimit -s unlimited and then  'ulimit -a' on my
>>>               server and these are the values i found these values
>>>
>>>               core file size          (blocks, -c) 0
>>>               data seg size           (kbytes, -d) unlimited
>>>               scheduling priority             (-e) 0
>>>               file size               (blocks, -f) unlimited
>>>               pending signals                 (-i) 65536
>>>               max locked memory       (kbytes, -l) 131072
>>>               max memory size         (kbytes, -m) unlimited
>>>               open files                      (-n) 1024
>>>               pipe size            (512 bytes, -p) 8
>>>               POSIX message queues     (bytes, -q) 819200
>>>               real-time priority              (-r) 0
>>>               stack size              (kbytes, -s) unlimited
>>>               cpu time               (seconds, -t) unlimited
>>>               max user processes              (-u) 65536
>>>               virtual memory          (kbytes, -v) unlimited
>>>               file locks                      (-x) unlimited
>>>
>>>               I believe the max memory memory is unlimited. However still
>>>               the program fails  with a segmentation fault and i have
>>>               attached the error file along with the email. I also get an
>>>               MPI message. Does that mean my code was not parallelized
>>>               properly?  But the gamma_p example runs very nicely
>>>        even when
>>>               i have 8 processors. I dont know why this example fails.
>>>
>>>               I'm really confused. I'm sorry for the trouble caused
>>>
>>>               Regardsq
>>>               Ram
>>>
>>>
>>>
>>>
>>>
>>>               7 more processes have sent help message
>>>        help-mpi-btl-base.txt
>>>               / btl:no-nics
>>>
>>>
>>>               On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger
>>>        <runggeri at tcd.ie <mailto:runggeri at tcd.ie>
>>>               <mailto:runggeri at tcd.ie <mailto:runggeri at tcd.ie>>> wrote:
>>>
>>>                   Hello Janikiraman,
>>>
>>>                    sometimes such a segmentation fault is caused by a low
>>>                   setting for the stack size limit in your shell. If
>>>        you use
>>>                   bash, you should set "ulimit -s unlimited" before
>>>        running
>>>                   smeagol. I also had a look at your input file, and in
>>>                   general it is OK, just you have to change the number of
>>>                   imaginary energy points. In your file you use 0 for the
>>>                   number of poles, which will not work, since you need at
>>>                   least a few poles. For a room temperature calculation I
>>>                   suggest to use:
>>>                   EnergImCircle           16
>>>                   NEnergImLine           16
>>>                   NPoles                       16
>>>
>>>                   Cheers,
>>>
>>>                   Ivan
>>>
>>>                   janakiraman balachandran wrote:
>>>
>>>                       Dear All
>>>
>>>                       Please discard all the questions that i had asked
>>>                       before. I found answers to them. Currently i'm
>>>        getting
>>>                       a segmentation fault which i dont understand
>>>        why? I'm
>>>                       trying to run a Benzene Dithiol in smeagol with Au
>>>                       electrodes. I used 20 processors to run the job
>>>        but it
>>>                       stillf ailed. I have attached the fdf of the
>>>        lead and
>>>                       the scattering region and the error and out file of
>>>                       the scattering region
>>>
>>>                       It would be of great help if someone can run
>>>        this to
>>>                       find out what is the problem. I'm not sure if
>>>        its the
>>>                       problem of my MPI. If so i will try to resolve it.
>>>
>>>                       Thank you
>>>
>>>                       Regards
>>>                       Ram
>>>
>>>  ------------------------------------------------------------------------
>>>
>>>                       _______________________________________________
>>>                       Smeagol-discuss mailing list
>>>                       Smeagol-discuss at lists.tchpc.tcd.ie
>>>        <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>
>>>                       <mailto:Smeagol-discuss at lists.tchpc.tcd.ie
>>>        <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>>
>>>
>>>                       http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.tchpc.tcd.ie/pipermail/smeagol-discuss/attachments/20110418/6677788b/attachment-0001.html 

From runggeri at tcd.ie  Wed Apr 20 07:54:33 2011
From: runggeri at tcd.ie (Ivan Rungger)
Date: Wed, 20 Apr 2011 07:54:33 +0100
Subject: [Smeagol-discuss] Segmentation fault error
In-Reply-To: <BANLkTik+idZQrCkaL-9HrAPDOFpf-oZUFQ@mail.gmail.com>
References: <BANLkTi=5vmq-PmtCXdhe6=R7u6zqNY8SsA@mail.gmail.com>
	<4DA9518F.4060505@tcd.ie>
	<BANLkTi=NYvaiQjmh=4Q1HwKTckOyu9b2wg@mail.gmail.com>
	<BANLkTinsbxhHFK_j32pXK_1nV1HWGqncCQ@mail.gmail.com>
	<BANLkTim-tqC1iwFwoH4XtVTzdB9_a+gsxw@mail.gmail.com>
	<4DAA8E82.40601@tcd.ie>
	<BANLkTimxYD5HfHn7OhhDWkvff-DoGD=51Q@mail.gmail.com>
	<4DAB46DF.8010602@tcd.ie>
	<BANLkTi=n7XeZ4mRJNNrVesced39DiDFegQ@mail.gmail.com>
	<BANLkTik+idZQrCkaL-9HrAPDOFpf-oZUFQ@mail.gmail.com>
Message-ID: <4DAE8329.6030508@tcd.ie>

Hello Janakiraman,

  in fact with the distribution version of the code you can run the 
leads calculation only on one processor, I think there were a few emails 
about this in the mailing list.

Cheers,

 Ivan

janakiraman balachandran wrote:
> Hi
>
> My system administrator did some mpi debugging (using PADB tool) and 
> this is the reason that he says for the job to get stuck infinitely
>
> Cpu Rank 0 is trying to call MPI_Bcast()  (an mpi 1.1 call) and the 
> rest (1-N) are calling MPI_Barrior()  (also an mpi 1.1 call) and they 
> are hung then because they are waiting for each other to complete.
>
> Has this been observed in smeagol and has the patches been made for it?
>
> Regards
> Ram
>
>
>
>
> On Mon, Apr 18, 2011 at 7:20 AM, janakiraman balachandran 
> <janarcs at umich.edu <mailto:janarcs at umich.edu>> wrote:
>
>     Ivan
>
>     My apologies for not putting the question correctly in the
>     previous email.  I was in the process of testing and i jumped the
>     gun in advance. I'm really sorry about that. The issue is with MPI.
>
>     a) I was seg faulting because i was trying to use the data from a
>     non mpi run of leads in a mpi run for scattering region. Is this
>     something common that has been observed?
>
>     b) If i run a lead(electrode) calculation in MPI, by commenting
>     the smeagol options (BulkTransport and BulkLeads), the job
>     completes. However if i include the smeagol options, the job goes
>     through the SCF, prints them and then it prints
>
>     *"Transport in z direction" *
>
>     and then it gets stuck. It never ends. To me the above problem
>     indicates, there is some issue with the parallelization of the
>     smeagol code. Have you encountered problems like this before? Do
>     you have some suggestion. I guess this would be the last hurdle,
>     since i understand how to use the options and how to match the
>     potential well.
>
>     It will be of great help if you can help me fix this problem.
>
>     Thank you
>
>     Regards
>     Ram
>
>
>
>
>     On Sun, Apr 17, 2011 at 4:00 PM, Ivan Rungger <runggeri at tcd.ie
>     <mailto:runggeri at tcd.ie>> wrote:
>
>         Hello Janakiraman,
>
>         I checked your input file: maybe the reason for the crashing
>         is that you use NeglNonOverlapInt True in the leads, but it is
>         set to False in the file for the scattering region. You have
>         to use the same value for both (I suggest to use
>         NeglNonOverlapInt False in both).
>
>
>         Cheers,
>
>         Ivan
>
>         janakiraman balachandran wrote:
>
>             Hi Ivan
>
>             Yes i did. Infact i went as low as
>             NEnergImCircle           5
>             NEnergImLine             5
>             NPoles                   10
>
>
>
>
>             Thank you
>
>             Ram
>
>
>             On Sun, Apr 17, 2011 at 2:53 AM, Ivan Rungger
>             <runggeri at tcd.ie <mailto:runggeri at tcd.ie>
>             <mailto:runggeri at tcd.ie <mailto:runggeri at tcd.ie>>> wrote:
>
>                Hi Janakiraman,
>
>                did you also change the number of imaginary energy points?
>
>
>                Cheers,
>
>                 Ivan
>
>                janakiraman balachandran wrote:
>
>                    Ivan
>
>                    If i comment out the smeagol input options, the
>             program runs
>                    fine without any issues. So does this mean that i'm
>             goofing up
>                    something with SMEAGOL options?
>
>                    Ram
>
>                    On Sat, Apr 16, 2011 at 1:17 PM, janakiraman
>             balachandran
>                    <janarcs at umich.edu <mailto:janarcs at umich.edu>
>             <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>
>                    <mailto:janarcs at umich.edu
>             <mailto:janarcs at umich.edu> <mailto:janarcs at umich.edu
>             <mailto:janarcs at umich.edu>>>> wrote:
>
>                       I actually checked in the server. We have
>             atleast 2GB of memory
>                       per node (4 procs per node, so atleast 512MB per
>             processor). I
>                       have used 2 - 4 nodes in my calculation all of
>             which fails. The
>                       output says that the dynamic memory allocated is
>             only of
>                    order of
>                       MB (sometimes 32, sometimes 64).
>
>                       I checked the successful gamma_p run. I saw 19
>             MB per
>                    processor.
>                       So i believe 32/64 MB as well was per processor.
>             Why SMEAGOL
>                       allocates so less memory when I have higher memory
>                    available? Was
>                       that cos of the options during compilation? If
>             so what options
>                       must i change to ensure that smeagol uses the
>             complete memory
>                       available
>
>                       Regards
>                       Ram
>
>
>                       On Sat, Apr 16, 2011 at 11:59 AM, janakiraman
>             balachandran
>                       <janarcs at umich.edu <mailto:janarcs at umich.edu>
>             <mailto:janarcs at umich.edu <mailto:janarcs at umich.edu>>
>                    <mailto:janarcs at umich.edu
>             <mailto:janarcs at umich.edu> <mailto:janarcs at umich.edu
>             <mailto:janarcs at umich.edu>>>> wrote:
>
>                           Thank you very much ivan
>                           I did a 'ulimit -s unlimited and then
>              'ulimit -a' on my
>                           server and these are the values i found
>             these values
>
>                           core file size          (blocks, -c) 0
>                           data seg size           (kbytes, -d) unlimited
>                           scheduling priority             (-e) 0
>                           file size               (blocks, -f) unlimited
>                           pending signals                 (-i) 65536
>                           max locked memory       (kbytes, -l) 131072
>                           max memory size         (kbytes, -m) unlimited
>                           open files                      (-n) 1024
>                           pipe size            (512 bytes, -p) 8
>                           POSIX message queues     (bytes, -q) 819200
>                           real-time priority              (-r) 0
>                           stack size              (kbytes, -s) unlimited
>                           cpu time               (seconds, -t) unlimited
>                           max user processes              (-u) 65536
>                           virtual memory          (kbytes, -v) unlimited
>                           file locks                      (-x) unlimited
>
>                           I believe the max memory memory is
>             unlimited. However still
>                           the program fails  with a segmentation fault
>             and i have
>                           attached the error file along with the
>             email. I also get an
>                           MPI message. Does that mean my code was not
>             parallelized
>                           properly?  But the gamma_p example runs very
>             nicely
>                    even when
>                           i have 8 processors. I dont know why this
>             example fails.
>
>                           I'm really confused. I'm sorry for the
>             trouble caused
>
>                           Regardsq
>                           Ram
>
>
>
>
>
>                           7 more processes have sent help message
>                    help-mpi-btl-base.txt
>                           / btl:no-nics
>
>
>                           On Sat, Apr 16, 2011 at 4:21 AM, Ivan Rungger
>                    <runggeri at tcd.ie <mailto:runggeri at tcd.ie>
>             <mailto:runggeri at tcd.ie <mailto:runggeri at tcd.ie>>
>                           <mailto:runggeri at tcd.ie
>             <mailto:runggeri at tcd.ie> <mailto:runggeri at tcd.ie
>             <mailto:runggeri at tcd.ie>>>> wrote:
>
>                               Hello Janikiraman,
>
>                                sometimes such a segmentation fault is
>             caused by a low
>                               setting for the stack size limit in your
>             shell. If
>                    you use
>                               bash, you should set "ulimit -s
>             unlimited" before
>                    running
>                               smeagol. I also had a look at your input
>             file, and in
>                               general it is OK, just you have to
>             change the number of
>                               imaginary energy points. In your file
>             you use 0 for the
>                               number of poles, which will not work,
>             since you need at
>                               least a few poles. For a room
>             temperature calculation I
>                               suggest to use:
>                               EnergImCircle           16
>                               NEnergImLine           16
>                               NPoles                       16
>
>                               Cheers,
>
>                               Ivan
>
>                               janakiraman balachandran wrote:
>
>                                   Dear All
>
>                                   Please discard all the questions
>             that i had asked
>                                   before. I found answers to them.
>             Currently i'm
>                    getting
>                                   a segmentation fault which i dont
>             understand
>                    why? I'm
>                                   trying to run a Benzene Dithiol in
>             smeagol with Au
>                                   electrodes. I used 20 processors to
>             run the job
>                    but it
>                                   stillf ailed. I have attached the
>             fdf of the
>                    lead and
>                                   the scattering region and the error
>             and out file of
>                                   the scattering region
>
>                                   It would be of great help if someone
>             can run
>                    this to
>                                   find out what is the problem. I'm
>             not sure if
>                    its the
>                                   problem of my MPI. If so i will try
>             to resolve it.
>
>                                   Thank you
>
>                                   Regards
>                                   Ram
>                                        
>              ------------------------------------------------------------------------
>
>                                  
>             _______________________________________________
>                                   Smeagol-discuss mailing list
>                                   Smeagol-discuss at lists.tchpc.tcd.ie
>             <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>
>                    <mailto:Smeagol-discuss at lists.tchpc.tcd.ie
>             <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>>
>                                  
>             <mailto:Smeagol-discuss at lists.tchpc.tcd.ie
>             <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>
>                    <mailto:Smeagol-discuss at lists.tchpc.tcd.ie
>             <mailto:Smeagol-discuss at lists.tchpc.tcd.ie>>>
>
>                                  
>             http://lists.tchpc.tcd.ie/listinfo/smeagol-discuss
>
>
>
>
>
>
>
>
>
>
>
>
>


